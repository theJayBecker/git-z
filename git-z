#!/bin/bash

# Gen Z Git Wrapper â€” Safe for global aliasing
# Alias this script as `git` in interactive shells only

REAL_GIT="$(command -v git)"

# ğŸ›¡ Only wrap in interactive terminals (not scripts, CI, etc.)
if [[ ! -t 1 ]]; then
  exec "$REAL_GIT" "$@"
fi

# ğŸ‘» Function: fallback usage message
function usage {
  echo "ğŸ’€ Unrecognized Gen Z command: $1"
  echo "Passing through to real git..."
}

# ğŸ§  Parse command
command="$1"
second="$2"

# Handle special case: 'finna add'
if [[ "$command $second" == "finna add" ]]; then
  echo "âœ¨ Staging for vibes... âœ¨"
  exec "$REAL_GIT" add .
fi

case "$command" in
  yoink)
    echo "ğŸ“¥ Yoinking the latest clout..."
    exec "$REAL_GIT" pull
    ;;

  yeet)
    shift
    if [[ "$1" == "--no-cap" ]]; then
      echo "ğŸ’¥ Yeeting your cringe *with force*, no cap..."
      exec "$REAL_GIT" push --force "${@:2}"
    else
      echo "ğŸ“¤ Yeeting your cringe to origin..."
      exec "$REAL_GIT" push "$@"
    fi
    ;;

  bet)
    shift
    echo "ğŸ“ Locking it in, no cap: $*"
    exec "$REAL_GIT" commit -m "$*"
    ;;

  cap)
    echo "ğŸ§¢ Rewinding the cringe, no cap..."
    exec "$REAL_GIT" reset --hard
    ;;

  drip)
    echo "ğŸ’§ Checking your drip..."
    exec "$REAL_GIT" status
    ;;

  ghost)
    shift
    echo "ğŸ‘» Ghosting to branch $*..."
    exec "$REAL_GIT" checkout "$@"
    ;;

  "throw")
    if [[ "$second" == "hands" ]]; then
      shift 2
      echo "ğŸ‘Š Throwing hands with $*..."
      exec "$REAL_GIT" merge "$@"
    else
      usage "$command $second"
      exec "$REAL_GIT" "$@"
    fi
    ;;

  realtalk)
    echo "ğŸ§± No more cap. This repo is *for real*..."
    exec "$REAL_GIT" init
    ;;

  shill)
    shift
    echo "ğŸ§ƒ Shilling to origin at: $*"
    exec "$REAL_GIT" remote add origin "$@"
    ;;

  receipts)
    echo "ğŸ§¾ Pulling up the receipts..."
    exec "$REAL_GIT" log
    ;;

  cancel)
    shift
    echo "ğŸš« Cancelling the nonsense..."
    exec "$REAL_GIT" revert "$@"
    ;;

  vibecheck)
    echo "ğŸ¯ Performing a vibe check..."
    exec "$REAL_GIT" diff
    ;;

  maincharacter)
    echo "ğŸŒŸ Becoming the main character..."
    exec "$REAL_GIT" switch main
    ;;

  glowup)
    shift
    echo "ğŸ“ˆ Time for a glow-up history rewrite..."
    exec "$REAL_GIT" rebase -i HEAD~${1:-3}
    ;;

  halp)
    echo "ğŸ™‹â™‚ Git-Z Command Glossary:"
    echo ""
    echo "  yoink                   â†’ git pull               ğŸ“¥  Pull the latest clout from origin"
    echo "  yeet                   â†’ git push               ğŸ“¤  Fling your cringe commits into the void"
    echo "  yeet --no-cap          â†’ git push --force       ğŸ’¥  Yeet with aggression, fr"
    echo "  finna add              â†’ git add .              âœ¨  Stage everything for the vibes"
    echo "  bet \"msg\"             â†’ git commit -m          ğŸ“  Lock in your changes, fr no cap"
    echo "  cap                   â†’ git reset --hard       ğŸ§¢  Undo all that nonsense, no cap"
    echo "  drip                  â†’ git status             ğŸ’§  Check the fit â€” what's changed"
    echo "  ghost <branch>        â†’ git checkout           ğŸ‘»  Dip to another branch, quietly"
    echo "  throw hands <branch>  â†’ git merge              ğŸ‘Š  Smash branches together like drama"
    echo "  realtalk              â†’ git init               ğŸ§±  Start the repo, no more games"
    echo "  shill <url>           â†’ git remote add origin  ğŸ§ƒ  Link the repo to origin and flex"
    echo "  receipts              â†’ git log                ğŸ§¾  Show the whole messy history"
    echo "  cancel <commit>       â†’ git revert             ğŸš«  Walk it back. No shame."
    echo "  vibecheck             â†’ git diff               ğŸ¯  Check for vibe violations"
    echo "  maincharacter         â†’ git switch main        ğŸŒŸ  Youâ€™re the star now"
    echo "  glowup [n]            â†’ git rebase -i HEAD~n   ğŸ“ˆ  Rewrite history to make it âœ¨slapâœ¨"
    echo ""
    echo "Tip: Works only in your terminal â€” CI and tools still use boring git."
    ;;

  *)
    usage "$command"
    exec "$REAL_GIT" "$@"
    ;;
esac
